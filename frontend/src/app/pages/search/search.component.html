<div class="search-container">
	<h2>Hae teoksia</h2>

	<p>Voit hakea kaikki teokset jättämällä kaikki kentät tyhjiksi tai hakea tarkemmin täyttämällä haluamasi kentät.</p>

	<label for="nimi">Teoksen nimi</label>
	<input id="nimi" type="text" [(ngModel)]="queryNimi" placeholder="Teoksen nimi" />
	<label for="tekija">Tekijä</label>
	<input id="tekija" type="text" [(ngModel)]="queryTekija" placeholder="Tekijä" />
	<label for="tyyppi">Tyyppi</label>
	<select id="tyyppi" [(ngModel)]="queryTyyppi">
		<option value="">-- Valitse tyyppi --</option>
		<option *ngFor="let tyyppi of tyypit" [value]="tyyppi.nimi">{{ tyyppi.nimi }}</option>
	</select>
	<label for="luokka">Luokka</label>
	<select id="luokka" [(ngModel)]="queryLuokka">
		<option value="">-- Valitse luokka --</option>
		<option *ngFor="let luokka of luokat" [value]="luokka.nimi">{{ luokka.nimi }}</option>
	</select>

	<button (click)="haeTeoksia()">Hae</button>

	<p *ngIf="virheViesti" class="error">{{ virheViesti }}</p>

	<ul *ngIf="teokset.length > 0">
		<li *ngFor="let teos of teokset" tabindex="0" (keydown.enter)="haeTeosInstanssit(teos)" (click)="haeTeosInstanssit(teos)">
			{{ teos.nimi }} - {{ teos.tekija }} ({{ teos.tyyppi }}) ({{ teos.luokka }})
		</li>
	</ul>
	<p *ngIf="teokset.length === 0 && !virheViesti">Ei tuloksia</p>

	<div *ngIf="valittuTeos">
		<h3>Instanssit: {{ valittuTeos.nimi }}</h3>

		<p *ngIf="virheViesti" class="error">{{ virheViesti }}</p>

		<ul *ngIf="instanssit.length > 0">
			<li *ngFor="let instanssi of instanssit">
				Hinta: {{ instanssi.hinta }}€, Kunto: {{ instanssi.kunto || 'Ei tietoa' }}
				<button (click)="lisaaOstoskoriin(instanssi)">Lisää ostoskoriin</button>
			</li>
		</ul>
		<p *ngIf="instanssit.length === 0 && !virheViesti">Ei tuloksia</p>
	</div>
</div>
