<div class="search-container">
	<h2>Hae teoksia</h2>

	<input type="text" [(ngModel)]="queryNimi" placeholder="Teoksen nimi" />
	<input type="text" [(ngModel)]="queryTekija" placeholder="Tekijä" />
	<input type="text" [(ngModel)]="queryTyyppi" placeholder="Tyyppi (romaani, sarjakuva...)" />
	<input type="text" [(ngModel)]="queryLuokka" placeholder="Luokka (romantiikka, seikkailu...)" />

	<button (click)="haeTeoksia()">Hae</button>

	<p *ngIf="virheViesti" class="error">{{ virheViesti }}</p>

	<ul *ngIf="teokset.length > 0">
		<li *ngFor="let teos of teokset" tabindex="0" (keydown.enter)="haeTeosInstanssit(teos)" (click)="haeTeosInstanssit(teos)">
			{{ teos.nimi }} - {{ teos.tekija }} ({{ teos.tyyppi }})
		</li>
	</ul>
	<p *ngIf="teokset.length === 0 && !virheViesti">Ei tuloksia</p>

	<div *ngIf="valittuTeos">
		<h3>Instanssit: {{ valittuTeos.nimi }}</h3>

		<p *ngIf="virheViesti" class="error">{{ virheViesti }}</p>

		<ul *ngIf="instanssit.length > 0">
			<li *ngFor="let instanssi of instanssit">
				Hinta: {{ instanssi.hinta }}€, Kunto: {{ instanssi.kunto || 'Ei tietoa' }}
				<button (click)="lisaaOstoskoriin(instanssi)">Lisää ostoskoriin</button>
			</li>
		</ul>
		<p *ngIf="instanssit.length === 0 && !virheViesti">Ei tuloksia</p>
	</div>
</div>
